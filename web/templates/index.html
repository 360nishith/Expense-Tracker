<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Expense Tracker</title>
  <!-- Link to external CSS file for styling -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
</head>
<body>
  <div class="container">
    <!-- Main heading -->
    <h1>Expense Tracker</h1>

    <!-- Form to add a new expense -->
    <!-- Sends POST request to /add route -->
    <form action="/add" method="POST">
      <!-- Input field for amount, decimal numbers allowed -->
      <input type="number" name="amount" step="0.01" placeholder="Amount (₹)" required />
      <!-- Input field for expense description -->
      <input type="text" name="description" placeholder="Description" required />
      <!-- Submit button -->
      <button type="submit">Add</button>
    </form>

    <!-- Section to display all expenses -->
    <h2>All Expenses</h2>

    <!-- Show flash messages if any (success/error notifications) -->
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <ul class="flash-messages">
          {% for message in messages %}
            <li>{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <!-- Check if there are expenses to show -->
    {% if expenses %}
      <!-- List all expenses -->
      <ul id="expense-list">
        {% for amount, desc, idx in expenses %}
          <li>
            <!-- Show amount and description -->
            ₹{{ '%.2f'|format(amount) }} - {{ desc }}
            <!-- Edit link, passes expense index -->
            <a href="{{ url_for('edit', idx=idx) }}" class="edit-btn">Edit</a>
            <!-- Delete link, passes expense index -->
            <a href="{{ url_for('delete', idx=idx) }}" class="delete-btn" onclick="return confirm('Are you sure you want to delete this expense?');">Delete</a>
          </li>
        {% endfor %}
      </ul>
      <!-- Show total amount of all expenses -->
      <h3>Total: ₹{{ '%.2f'|format(total) }}</h3>
    {% else %}
      <!-- If no expenses, show this message -->
      <p>No expenses added yet.</p>
    {% endif %}
  </div>

  <!-- Include GSAP animation library from CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <!-- Link to custom JavaScript file -->
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
